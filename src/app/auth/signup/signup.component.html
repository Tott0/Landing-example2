<div class="main-container">
  <div class="container">

    <mat-card>
      <mat-card-title>
        Registro
      </mat-card-title>
      <mat-divider></mat-divider>
      <mat-card-content>

        <form [formGroup]="userForm" (ngSubmit)="onSubmit()">

          <mat-form-field>
            <input matInput placeholder="Correo Electrónico" type="text" [formControl]="email" (input)="errors.message = undefined;">
            <mat-error *ngIf="email.invalid || errors.email">{{getErrorMessage(email, errors.email)}}</mat-error>
          </mat-form-field>


          <mat-radio-group [formControl]="personType">
            <mat-radio-button [value]="PersonType.NATURAL">Persona Natural</mat-radio-button>
            <mat-radio-button [value]="PersonType.JURIDICA">Persona Jurídica</mat-radio-button>
          </mat-radio-group>

          <div *ngIf="personType && personType.value === PersonType.NATURAL" [formGroup]="person">
            <mat-form-field>
              <input matInput placeholder="Nombres" type="text" [formControl]="pName" (input)="errors.message = undefined;">
              <mat-error *ngIf="pName.invalid || errors.name">{{getErrorMessage(pName, errors.name)}}</mat-error>
            </mat-form-field>

            <mat-form-field>
              <input matInput placeholder="Apellidos" type="text" [formControl]="pLastName" (input)="errors.message = undefined;">
              <mat-error *ngIf="pLastName.invalid || errors.lastName">{{getErrorMessage(pLastName, errors.lastName)}}</mat-error>
            </mat-form-field>

            <mat-form-field>
              <input matInput placeholder="Identificación" type="text" [formControl]="pIdentification" (input)="errors.message = undefined;">
              <mat-error *ngIf="pIdentification.invalid || errors.identification">{{getErrorMessage(pIdentification, errors.identification)}}</mat-error>
            </mat-form-field>

            <mat-form-field>
              <input matInput placeholder="Teléfono" type="text" [formControl]="pPhoneNumber" (input)="errors.message = undefined;">
              <mat-error *ngIf="pPhoneNumber.invalid || errors.contact_phone">{{getErrorMessage(pPhoneNumber, errors.contact_phone)}}</mat-error>
            </mat-form-field>
          </div>

          <div *ngIf="personType && personType.value === PersonType.JURIDICA" [formGroup]="company">
            <mat-form-field>
              <input matInput placeholder="Razón Social" type="text" [formControl]="cName" (input)="errors.message = undefined;">
              <mat-error *ngIf="cName.invalid || errors.name">{{getErrorMessage(cName, errors.name)}}</mat-error>
            </mat-form-field>

            <mat-form-field>
              <input matInput placeholder="Nit" type="text" [formControl]="cNit" (input)="errors.message = undefined;">
              <mat-error *ngIf="cNit.invalid || errors.nit">{{getErrorMessage(cNit, errors.nit)}}</mat-error>
            </mat-form-field>
          </div>

          <div [formGroup]="passwords" *ngIf="!loadedUser">
            <mat-form-field>
              <input matInput placeholder="Contraseña" type="password" [formControl]="password" (input)="errors.message = undefined;">
              <mat-error *ngIf="password.invalid || errors.password">{{getErrorMessage(password, errors.password)}}</mat-error>
            </mat-form-field>

            <mat-form-field>
              <input matInput placeholder="Confirmación Contraseña" type="password" [formControl]="password_confirmation" (input)="errors.message = undefined;">
              <mat-error *ngIf="password_confirmation.invalid || errors.password_confirmation">{{getErrorMessage(password_confirmation, errors.password_confirmation)}}</mat-error>
            </mat-form-field>
          </div>

        </form>

        <mat-checkbox [(ngModel)]="willRent" class="cb-rent" (change)="renterChange($event)">
          Planeo listar espacios para arrendar
        </mat-checkbox>

        <mat-accordion>
          <mat-expansion-panel [disabled]="!willRent">
            <mat-expansion-panel-header>
              <mat-panel-title>
                Información requerida para arrendamiento
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="content">
              <mat-form-field>
                <input matInput placeholder="Info de Registro" type="password" (input)="errors.message = undefined;">
              </mat-form-field>
            </div>
          </mat-expansion-panel>
        </mat-accordion>


        <mat-error *ngIf="errors.message" class="form-errors">
          {{ errors.message }}
        </mat-error>

        <button mat-raised-button color="primary" class="btn-submit" [disabled]="userForm.invalid" (click)="onSubmit()">
          <span>Completar Registro</span>
        </button>

      </mat-card-content>

    </mat-card>
  </div>
</div>